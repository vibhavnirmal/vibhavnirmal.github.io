<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Vibhav Nirmal, vibhav, nirmal ,LDCE , MachineLearningBlog, TechieViN">
    <link rel="shortcut icon" type="image" href="resources\images\logos\vin.png" />
    <meta name="description" content="Robotics enthusiast. Learning new stuff every day.">
    <title>Vibhav Nirmal</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="resources/css/index.css">

</head>

<body>
    <div class="top-right">

    </div>
    <div class="container">
        <div class="content">
            <div id="navBar">
                <div id="stickLeft">
                    <a href="index.html" class="navButton">Code/Blogposts</a>
                    <a href="aboutme.html" class="navButton">About Me</a>
                </div>
                <div id="stickRight">
                    <a href="https://github.com/vibhavnirmal" target="_blank">
                        <img src="resources/images/logos/GitHub_Logo.png" alt="Github" class="socialIcon" height="36">
                    </a>
                </div>
            </div>

            <div class="view-type">
                <div class="view-type-button" onclick="changeView('list')">
                    <img id="list-icon" src="resources\images\list.svg" alt="List View" class="view-type-icon">
                </div>
                <div class="view-type-button" onclick="changeView('grid')">
                    <img id="grid-icon" src="resources\images\grid.svg" alt="Grid View" class="view-type-icon active">
                </div>
            </div>

            <div class="blog-filter">
            </div>

            <div class="mainProjects">
                <div id="blog-container" class="grid-view">
                </div>
            </div>
        </div>
    </div>
    <script>
        function changeView(view) {
            var container = document.getElementById("blog-container");
            var gridIcon = document.getElementById("grid-icon");
            var listIcon = document.getElementById("list-icon");

            if (view === 'grid') {
                container.classList.remove("list-view");
                container.classList.add("grid-view");

                gridIcon.classList.add("active");
                listIcon.classList.remove("active");
            } else if (view === 'list') {
                container.classList.remove("grid-view");
                container.classList.add("list-view");

                listIcon.classList.add("active");
                gridIcon.classList.remove("active");
            }
        }

        function filterSelection(tag) {
            var projects = document.getElementsByClassName("blog-listing all");
            for (var i = 0; i < projects.length; i++) {
                if (projects[i].classList.contains(tag)) {
                    projects[i].style.display = "block";
                } else {
                    projects[i].style.display = "none";
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Get the current URL or page
            var currentPage = window.location.href;

            // Find the navigation item that matches the current URL and add the "current" class
            var navigationItems = document.getElementsByTagName('a');
            for (var i = 0; i < navigationItems.length; i++) {
                if (currentPage.indexOf(navigationItems[i].href) > -1) {
                    navigationItems[i].className = 'current';
                }
            }
        });

        function createFilterElement(uniqueTags) {
            const filterElement = document.createElement('div');
            filterElement.classList.add('filter');

            const filterNavElement = document.createElement('nav');
            const filterUlElement = document.createElement('ul');

            // Add all button to show all
            const filterLiElementAll = createFilterButton('all', '#All');
            filterUlElement.appendChild(filterLiElementAll);

            uniqueTags.forEach(tag => {
                const tagText = '#' + tag;
                const filterLiElement = createFilterButton(tag, tagText);
                filterUlElement.appendChild(filterLiElement);
            });

            filterNavElement.appendChild(filterUlElement);
            filterElement.appendChild(filterNavElement);

            const blogFilterElement = document.getElementsByClassName('blog-filter')[0];
            blogFilterElement.appendChild(filterElement);
        }

        function createFilterButton(tag, text) {
            const filterLiElement = document.createElement('li');
            filterLiElement.classList.add('filter-button');
            filterLiElement.onclick = function () { filterSelection(tag); };
            filterLiElement.textContent = text;
            
            return filterLiElement;
        }

        function createBlogListing(project) {
            const blogListing = document.createElement('div');
            blogListing.classList.add('blog-listing');
            blogListing.classList.add('all');

            project.tags.forEach(tag => {
                blogListing.classList.add(tag);
            });

            const titleElement = document.createElement('h2');
            titleElement.classList.add('blog-title');
            titleElement.textContent = project.title;

            const linkElement = document.createElement('a');
            if (project.titleLink === '#') {
                linkElement.onclick = function () { return false; };
                linkElement.style.cursor = 'default';
            } else {
                linkElement.href = project.titleLink;
            }

            const excerptElement = document.createElement('p');
            excerptElement.classList.add('blog-excerpt');
            excerptElement.textContent = project.description;

            const dateElement = createBlogDateElement(project.date);

            const iconElement = createIconElement(project.multipleLinks);

            blogListing.appendChild(dateElement);
            linkElement.appendChild(titleElement);
            blogListing.appendChild(linkElement);
            blogListing.appendChild(excerptElement);
            blogListing.appendChild(iconElement);

            return blogListing;
        }

        function createBlogDateElement(date) {
            const dateElement = document.createElement('p');
            dateElement.classList.add('blog-date');

            const dateObject = new Date(date);
            dateObject.setDate(dateObject.getDate() + 1);
            const humanDateFormat = dateObject.toLocaleString("en-US", { weekday: "long", year: "numeric", month: "long", day: "numeric" });
            dateElement.textContent = 'Published on ' + humanDateFormat;

            return dateElement;
        }

        function createIconElement(multipleLinks) {
            const iconElement = document.createElement('div');
            iconElement.classList.add('blog-icons');

            multipleLinks.forEach(link => {
                if (link.link === '#') {
                    iconElement.style.display = 'none';
                } else {
                    const iconLink = document.createElement('a');
                    iconLink.href = link.link;

                    const iconImg = document.createElement('img');
                    iconImg.src = link.icon;
                    iconImg.alt = 'Icon';
                    iconImg.classList.add('socialIcon');

                    iconLink.appendChild(iconImg);
                    iconElement.appendChild(iconLink);
                }
            });

            return iconElement;
        }

        function filterSelection(tag) {
            const blogListings = document.getElementsByClassName('blog-listing');

            if (tag === 'all') {
                Array.from(blogListings).forEach(listing => {
                    listing.style.display = 'block';
                });
            } else {
                Array.from(blogListings).forEach(listing => {
                    if (listing.classList.contains(tag)) {
                        listing.style.display = 'block';
                    } else {
                        listing.style.display = 'none';
                    }
                });
            }
        }

        fetch('resources/data.json')
            .then(response => response.json())
            .then(data => {
                let alltags = [];

                data.projects.forEach(project => {
                    project.tags.forEach(tag => {
                        alltags.push(tag);
                    });
                });

                const uniqueTags = Array.from(new Set(alltags));

                createFilterElement(uniqueTags);

                const blogContainer = document.getElementById('blog-container');

                data.projects.forEach(project => {
                    const blogListing = createBlogListing(project);
                    blogContainer.appendChild(blogListing);
                });
            })
            .catch(error => console.error(error));

    </script>
</body>

</html>